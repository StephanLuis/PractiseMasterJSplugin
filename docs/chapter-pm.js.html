<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: chapter-pm.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: chapter-pm.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * this module provides the Chapter class it is derived from the Loop class, currently member of the Player class
 * 
 * @module Chapter Module
 * @requires Loop Module
 */


import Loop from "./loop-pm";


/**
 * plays a time range of video/audio once (instead of looping)
 * @class Chapter
 */

class Chapter extends Loop {

    /**
     * class constructor
     * @param {string} id player/plyr/div id
     * @param {number} start time to start chapter
     * @param {number} end time to end chapter
     */

    constructor(id, start, end) {
        super(id, start, end)

    }

    // note document.addEventListener('timeupdate', pmHelpers.delegateByIDparams(this.id, this.startTimeSeconds, this.endTimeSeconds, this.playSegment));
    // in parent class sets an event listener that is fired each time the player.duration is updated

    /**
     *  plays a chapter with the class parameters start and stop times
     */

    playSegment() {

        // play once=> 


        console.log("Hey, I'll play a chapter, 'this.id' is " + this.id);

        /// Start Here adapt for playing once, algo above.

        // not sure of the reason for this empty string check.  Think that it's about not picking up the events from non practisemaster Plyr videos on the page
        if (this.id !== "") {

            // if Loop not switched offF

            if (!window["PMinstance_" + this.id].chapter.off) {


                console.log("Playing chapter from " + window["PMinstance_" + this.id].chapter.startTimeSeconds);


                var currentTime = window["PMinstance_" + this.id].plyrInstance.currentTime * 10000;


                if (window["PMinstance_" + this.id].chapter.endTimeSeconds &lt; currentTime) {


                    window["PMinstance_" + this.id].plyrInstance.pause();


                    console.log("Ending chapter at " + window["PMinstance_" + this.id].chapter.endTimeSeconds);


                    window["PMinstance_" + this.id].chapter.off = true;


                    console.log('Chapter was toggled off.');

                }

            }

        }

    }

}

export default Chapter;</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-Chapter%2520Module.html">Chapter Module</a></li><li><a href="module-Helpers%2520Module.html">Helpers Module</a></li><li><a href="module-HostSite%2520Module.html">HostSite Module</a></li><li><a href="module-Loop%2520Module.html">Loop Module</a></li><li><a href="module-PageSupport%2520Module.html">PageSupport Module</a></li><li><a href="module-Player%2520Module.html">Player Module</a></li><li><a href="module-PractiseMaster%2520Module.html">PractiseMaster Module</a></li><li><a href="module-UIprep%2520Module.html">UIprep Module</a></li></ul><h3>Classes</h3><ul><li><a href="module-Chapter%252520Module-Chapter.html">Chapter</a></li><li><a href="module-Helpers%2520Module-Helpers.html">Helpers</a></li><li><a href="module-HostSite%2520Module-HostSite.html">HostSite</a></li><li><a href="module-Loop%252520Module-Loop.html">Loop</a></li><li><a href="module-PageSupport%252520Module-PageSupport.html">PageSupport</a></li><li><a href="module-Player%252520Module-Player.html">Player</a></li><li><a href="module-PractiseMaster%2520Module-PractiseMaster.html">PractiseMaster</a></li><li><a href="module-UIprep%252520Module-UIprep.html">UIprep</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Wed Feb 22 2023 22:49:50 GMT+0000 (Coordinated Universal Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
