<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: UIprep-pm.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: UIprep-pm.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * module provides UIprep class
 * @module UIprep Module
 * @requires ChronlyHMS Module
 * @requires ChronlyHMS CSS
 */

// chronly self boots / news it self up so here the import is needed but the module is show as not used
import ChronlyHMS from 'chronlyhms';
import 'chronlyhms/src/chrono.css'


/**
 * class is for assets that appear once on each page, independant from the number of videos
 * @class UIprep
 * @property {number} id player/plyr/div id
 * @property {boolean} isOnScreen ex. always yes, Safari
 */

class UIprep {

    /**
     * class construlctor
     * @param {element} el PM element
     */

    constructor(el) {

        this.id = el.id;

        this.isOnScreen;

        if (window.PractiseMaster.PageSupport.isSafari) {
            this.isOnScreen = false;
        }

    }

    // Class methods

    addAudioStyle(id){

        // this is the same as off player control so may be good to refactor and keep the 
        // two together

        
        // update control div with buttons

        var controls = document.querySelector('#' + id + ' > div.plyr__controls');

        controls.style.position = 'inherit';

        controls.style.paddingTop = '5px';

        controls.style.paddingBottom = '5px';

        controls.style.background = '#BFBFBF';


        // update player container

        document.querySelector('#' + id).style.background = '#BFBFBF';

        document.querySelector('#' + id).style.borderRadius = '5px';

        // end of duplicate code

        var controlsRest = document.querySelector('.plyr--audio .plyr__controls');

        controlsRest.style.color = 'white';
        

    }

    /**
     * sets up loop builder links
     */

    addHTMLlink() {


        // method call
        // window.PractiseMaster.PageSupport.PMloop('HplayerLinks', 5, 6)

        // 'this'  is instance of UIprep

        // don't need parameters, building a link based on current loop

        //  ('#' + this.id + '_timeStart')
        //  document.querySelector("#demo76979871_timeStart").value

        // old value
        // var startSeconds = window["PMinstance_" + this.id].loop.startTimeSeconds;

        var startTime = document.querySelector('#' + this.id + '_timeStart').value.substring(3)
        var endTime = document.querySelector('#' + this.id + '_timeEnd').value.substring(3)

       // var startTime = PractiseMaster.PageSupport.helpers.toStringTime(startSeconds / 10000).substring(3);
       //  var endTime = PractiseMaster.PageSupport.helpers.toStringTime(endSeconds / 10000).substring(3);


        var loopLinkLiteral = `
        &lt;div id='${this.id}_linkDiv'>
        &lt;a href="#${this.id}" onclick="window.PractiseMaster.PageSupport.PMloop(\'${this.id}\', \'${startTime}\', \'${endTime}\')">Loop from ${startTime} to ${endTime}&lt;/a>
        &lt;input  type="text" value="&lt;a href='#${this.id}' onclick='window.PractiseMaster.PageSupport.PMloop(&amp;quot;${this.id}&amp;quot;, &amp;quot;${startTime}&amp;quot;, &amp;quot;${endTime}&amp;quot;)'>Loop from ${startTime} to ${endTime}&lt;/a>" style="width: -webkit-fill-available;" disabled>
         &lt;input type="button" value="Copy Link" onclick= "((event) => {navigator.clipboard.writeText(document.querySelector('#${this.id}_linkDiv > input[type=text]').value);})()">
         &lt;/div>
        `

        var chapterLinkLiteral = `
        &lt;div id='${this.id}_linkDiv'>
        &lt;a href="#${this.id}" onclick="window.PractiseMaster.PageSupport.PMchapter(\'${this.id}\', \'${startTime}\', \'${endTime}\')">Chapter from ${startTime} to ${endTime}&lt;/a>
        &lt;input  type="text" value="&lt;a href='#${this.id}' onclick='window.PractiseMaster.PageSupport.PMchapter(&amp;quot;${this.id}&amp;quot;, &amp;quot;${startTime}&amp;quot;, &amp;quot;${endTime}&amp;quot;)'>Chapter from ${startTime} to ${endTime}&lt;/a>" style="width: -webkit-fill-available;" disabled>
         &lt;input type="button" value="Copy Link" onclick= "((event) => {navigator.clipboard.writeText(document.querySelector('#${this.id}_linkDiv > input[type=text]').value);})()">
         &lt;/div>
        `


        // get player div, add new div as sibling

        var broOfLinks = document.querySelector('#' + this.id);


        if (window["PMinstance_" + this.id].loop.off) {

            broOfLinks.insertAdjacentHTML('afterend', chapterLinkLiteral);

        } else {

            broOfLinks.insertAdjacentHTML('afterend', loopLinkLiteral);

        }


        document.querySelector('#' + this.id + '_linkDiv > input[type=button]').focus();

    }



    /**
     * sets up chapter builder button and links
     */

    addHTMLchapter(start, end) {

        alert('The Loop is &lt;a>  start: ' + start + ' and end :' + end);
    }



    /**
     * disables ChronlyHMS inputs (for end user)
     */

    diableChronly() {

        window.ChronlyHMS.disableInputs()

        document.querySelectorAll("input.ts_digit").forEach(x => x.style.color = "white");
        document.querySelectorAll("input.ts_digit").forEach(x => x.style.background = "none");
        document.querySelectorAll("div.timeCase").forEach(x => x.style.border = "none");

    }



    /**
     * sets up loop builder button
     * @param {string} id player/plyr/div id
     */

    addLinkButton(id) {

        var linkButtonLiteral = `
        
                    
        &lt;button id="${id}_links" class="plyr__controls__item plyr__control" type="button" style="padding-top: 3px; padding-bottom: 6px;">
                        &lt;svg aria-hidden="true" focusable="false" data-prefix="fak" data-icon="light-link-circle-arrow-down" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 610 510" class="uploaded-icon-preview svg-inline--fa fa-light-link-circle-arrow-down" style="width: 31px;height: 22px;">&lt;path fill="currentColor" d="M173 131.4c49.1-49.9 130.9-49.9 180.8 0c26.2 26.2 38.5 61 37 95.5c-28 20.9-49.6 50-61.2 83.7c-4.2-5.8-4-14 .9-19.8c1.8-2.1 3.6-4.1 5.4-6.2c32.9-38 30.9-95-4.7-130.5c-37.4-37.5-98.1-37.5-135.5 0c-41.5 41.5-83.1 83-124.6 124.5c-37.5 37.5-37.5 98.3 0 135.8c37.5 37.5 98.3 37.5 135.8 0c7.5-7.5 15.1-15.1 22.6-22.6c6.2-6.3 16.4-6.3 22.6 0c6.3 6.2 6.3 16.3 0 22.6c-7.5 7.5-15.1 15.1-22.6 22.6c-50 50-131 50-181 0s-50-131.9 0-181c41.5-41.5 83-83.1 124.5-124.6zM286.2 380.6c-47.5-47.5-50.2-123.5-7.1-174.2c2.1-2 4.1-4.1 6.2-6.1c5.8-6.7 15.9-7.4 22.6-1.6c6.6 5.7 7.4 15.8 1.6 22.5c-1.8 2.1-3.6 4.1-5.4 6.2c-32.9 38-30.9 95 4.7 130.5c3.5 3.5 7.3 6.8 11.2 9.6c0 .2 0 .3 0 .5c0 13.4 1.5 26.4 4.3 38.9c-13.8-6.2-26.8-15-38.1-26.3zm282.7-283c-37.5-37.5-98.3-37.5-135.8 0c-7.5 7.5-15.1 15.1-22.6 22.6c-6.2 6.3-16.4 6.3-22.6 0c-6.3-7.1-6.3-16.3 0-22.6c7.5-7.5 15.1-15.1 22.6-22.6c50-50 131-50 181 0c43.2 42.4 49.1 109.2 17.7 158.3c-8.1-6.8-16.8-12.9-26-18.1c22.3-36.9 17.6-85.7-14.3-117.5zM496 480c40 0 77-21.3 97-56s20-77.3 0-112s-57-56-97-56s-77 21.3-97 56s-20 77.3 0 112s57 56 97 56zm0-256c51.4 0 99 27.4 124.7 72s25.7 99.4 0 144S547.4 512 496 512s-99-27.4-124.7-72s-25.7-99.4 0-144s73.3-72 124.7-72zm67.3 163.3l-56 56c-6.2 6.3-16.4 6.3-22.6 0c-18.7-18.7-37.3-37.3-56-56c-6.2-6.2-6.2-16.4 0-22.6s16.4-6.2 22.6 0c9.6 9.6 19.1 19.1 28.7 28.7c0-29.8 0-59.6 0-89.4c0-8.8 7.2-16 16-16s16 7.2 16 16c0 29.8 0 59.6 0 89.4c9.6-9.6 19.1-19.1 28.7-28.7c6.2-6.2 16.4-6.2 22.6 0s6.2 16.4 0 22.6z" class="">&lt;/path>&lt;/svg>
                        &lt;span class="label--pressed plyr__sr-only">Text for Label&lt;/span>
                        &lt;span class="label--not-pressed plyr__sr-only">Text for Label&lt;/span>
                        &lt;/button>
                    &lt;div style="flex-grow: 1;">&lt;/div>
        `

        // append lbl

        document.querySelector("#" + id + " > div.plyr__controls").insertAdjacentHTML('beforeend', linkButtonLiteral);
    }



    /**
     * adds chronlyHMS to page and styles
     * @param {string} id player/plyr/div id
     */

    applyChronlyMSU(id) {

        // add data-univHMS to inputs

        // put these in the HTML string literal


        // chronly is self 'newing' and instance is already a window variable, just run Chronly boot

        window.ChronlyHMS.boot();

        window.ChronlyHMS.noHours();


        // style max width of total control

        document.querySelectorAll("div.timeCase").forEach(x => x.style.maxWidth = 'none');
        document.querySelectorAll("div.timeCase").forEach(x => x.style.width = "130px");

        // width for display with hours:
        // document.querySelectorAll("div.timeCase").forEach(x => x.style.width = "160px");



        // style width of chronly inputs
        document.querySelectorAll("input.ts_digit").forEach(x => x.style.width = "25px");
        document.querySelectorAll("input.sMS.ts_digit").forEach(x => x.style.width = "35px");

        // style svg

        document.querySelectorAll("#svgContainer").forEach(x => x.style.padding = '5px');
        document.querySelectorAll("#svgContainer").forEach(x => x.style.color = 'white');


        // link builder is always off screen and static (to keep UI options simple)

        //  this.offPlayerControls(id);

    }



    /**
     * currently unused
     */

    applyPlyrReadyCssHTMLSettings() {

        // change plyr to static if neccessary 
        // early host specific css

    }



    /**
     * The player's id for CSS update
     * @param {string} id playerID
     */

    applyPMReadyCssHTMLSettings(id) {


        // PM Controls Style


        // should this be id based, incase user page has time input on it?

        Array.from(document.querySelectorAll("input[type=time]")).forEach(element => {
            element.disabled = true;

            element.type = "text";

            element.style.minWidth = "70px";
            element.style.maxWidth = "80px";

            element.value = "00:00.00";

        });


        // turn off the practise master logo

        Array.from(document.querySelectorAll(".PMlogo")).forEach(element => {
            element.style.display = "none";
        });


        document.querySelector("#" + id + " div.plyr__controls").style.flexWrap = "wrap";
        // I think this is the play button display
        //  document.querySelector("#" + id + " div.plyr__controls > button:nth-child(5)").style.display = "none";


        // late host site specific css 

        // quick test mode


        // debug 10 Oct 2022 style at bottom of PM
        // this.hostSite.formatIndependantCSS(id);

        // this.hostSite.cssForFiddleHedVimeo(id);

    }



    /**
     * @param {object} player 
     */

    setOffPlayerControls(player) {

        if (player.CSSclasses.includes('offScreen') || window.PractiseMaster.PageSupport.isSafari) {

            this.offPlayerControls(player.id);
        }

    }



    /**
     * see setOffPlayerControls()
     * @param {string} id player/plyr/div id
     */

    offPlayerControls(id) {


        // update control div with buttons

        var controls = document.querySelector('#' + id + ' > div.plyr__controls');

        controls.style.position = 'inherit';

        controls.style.paddingTop = '5px';

        controls.style.paddingBottom = '5px';

        controls.style.background = '#BFBFBF';


        // update player container

        document.querySelector('#' + id).style.background = '#BFBFBF';

        document.querySelector('#' + id).style.borderRadius = '5px';


        // place controls after wrapper

        var wrapper = document.querySelector('#' + id + ' > div.plyr__video-wrapper');

        wrapper.after(controls);

    }

}

export default UIprep;</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-Chapter%2520Module.html">Chapter Module</a></li><li><a href="module-Helpers%2520Module.html">Helpers Module</a></li><li><a href="module-HostSite%2520Module.html">HostSite Module</a></li><li><a href="module-Loop%2520Module.html">Loop Module</a></li><li><a href="module-PageSupport%2520Module.html">PageSupport Module</a></li><li><a href="module-Player%2520Module.html">Player Module</a></li><li><a href="module-PractiseMaster%2520Module.html">PractiseMaster Module</a></li><li><a href="module-UIprep%2520Module.html">UIprep Module</a></li></ul><h3>Classes</h3><ul><li><a href="module-Chapter%252520Module-Chapter.html">Chapter</a></li><li><a href="module-Helpers%2520Module-Helpers.html">Helpers</a></li><li><a href="module-HostSite%2520Module-HostSite.html">HostSite</a></li><li><a href="module-Loop%252520Module-Loop.html">Loop</a></li><li><a href="module-PageSupport%252520Module-PageSupport.html">PageSupport</a></li><li><a href="module-Player%252520Module-Player.html">Player</a></li><li><a href="module-PractiseMaster%2520Module-PractiseMaster.html">PractiseMaster</a></li><li><a href="module-UIprep%252520Module-UIprep.html">UIprep</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Wed Feb 22 2023 22:49:50 GMT+0000 (Coordinated Universal Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
