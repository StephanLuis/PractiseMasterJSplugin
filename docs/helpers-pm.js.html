<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: helpers-pm.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: helpers-pm.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * the module for the Helpers class
 * @module Helpers Module 
 */



/**
 * cross class methods used through out the application ex. time formats and closure delegates
 */

class Helpers {
    constructor() {

    }

    // 

    /**
     * this delegates are called when creating event listeners to encapsulate the player Id or other control data and the intended target code by creating a closure
     * @param {string} selector CSS type selector for element
     * @param {method} handler method to be called
     * @returns a closure for the event listener 
     */
    delegate(selector, handler) {
        return function (event) {
            var targ = event.target;
            do {
                if (targ.matches(selector)) {
                    handler.call(targ, event);
                }
            } while ((targ = targ.parentNode) &amp;&amp; targ != event.currentTarget);
        }
    }



    /**
     * this delegates are called when creating event listeners to encapsulate the player Id or other control data and the intended target code by creating a closure
     * @param {string} selector CSS type selector for element
     * @param {method} handler method to be called
     * @returns a closure for the event listener 
     */

    delegateByID(selector, handler) {
        return function (event) {
            var targ = event.target;
            var targID = event.target.id;
            do {
                if (targID == selector) {
                    handler.call(targ, event);
                }
            } while ((targ = targ.parentNode) &amp;&amp; targ != event.currentTarget);
        }
    }



    /**
     * this delegates are called when creating event listeners to encapsulate the player Id or other control data and the intended target code by creating a closure with additional parameters
     * @param {string} selector CSS type selector for element
     * @param {number} start time to start video / audio
     * @param {number} end time to end video / audio
     * @param {method} handler method to be called
     * @returns a closure for the event listener 
     */

    delegateByIDparams(selector, start, end, handler) {
        return function (event) {
            var targ = event.target;
            var targID = event.target.id;
            do {
                if (targID == selector) {
                    handler.call(targ, start, end, event);
                }
            } while ((targ = targ.parentNode) &amp;&amp; targ != event.currentTarget);
        }
    }

    // this converts a float to a string for &lt;input type="time"> 

    /**
     * converts a number of seconds incl decimal to a hh:mm:ss.uuu format
     * @param {number} numberSeconds 
     * @returns string
     */

    toStringTime(numberSeconds) {

        var date = new Date(null);
        // subtraction requires 'decimal guarding'

        var numberSecondsMultip = numberSeconds * 10000;
        var numberIntegerMultip = Math.floor(numberSeconds) * 10000;


        var numberDecimalMultip = numberSecondsMultip - numberIntegerMultip;


        date.setSeconds(numberIntegerMultip / 10000);
        date.setMilliseconds(numberDecimalMultip / 10);

        return date.toISOString().substring(11, 23);
    }


    // type checking for hmsuToSecondsOnly
    // universal input for time
    // "1:01", "1:01.000", "61", 61 all accepted 
    // and converted seconds of the type Number 

    /**
     * type checking for hmsuToSecondsOnly universal input for time
     *  "1:01", "1:01.000", "61", 61 all accepted 
     * and converted seconds of the type Number 
     * @param {string | number} param  time in various formats
     * @returns {number} time in number of seconds 
     */

    secondsNumber(param) {
        if (typeof param === 'string' || param instanceof String)

            return this.hmsuToSecondsOnly(param);

        else if (typeof param === 'number') {

            return param;

        } else {

            console.log('The parmater for PMloop is not in one of the two allowed formats.');
        }
        // it's something else
    }



    /**
     * converts various string representations of time into a number of seconds
     * @param {string} str time in string format hh:mm:ss.uuu
     * @returns {number} number of seconds
     */

    hmsuToSecondsOnly(str) {


        var p = str.split(':'),
            s = 0, m = 1;

        while (p.length > 0) {

            // number is a bit quicker than parsefloat
            s += m * Number(p.pop(), 10);
            m *= 60;
        }

        // decimal guarding not required

        return s;

    }



    /**
     * validates input times on player returns true if invalid, false if valid
     * @param {string} id id player/plyr/div id
     * @returns {boolean} whether the input times on player are valid
     */

    redWarningValidation(id) {

        const startTimeControl = document.querySelector("#" + id + "_timeStart");

        const endTimeControl = document.querySelector("#" + id + "_timeEnd");

        const loop = window["PMinstance_" + id].loop;


        const conditionsArray = [
            (loop.startTimeSeconds &lt; 0),
            (loop.endTimeSeconds &lt; 0),
            (loop.startTimeSeconds > loop.videoDuration),
            (loop.endTimeSeconds > loop.videoDuration),
            (loop.startTimeSeconds + 0.25 > loop.endTimeSeconds)


        ];

        if (!loop.off) {

            if (conditionsArray.includes(true)) {


                var elErr = document.querySelector("#" + id).querySelectorAll("input.plyr__control")

                Array.from(elErr).forEach(item => { item.classList.add("plyr__controlError") });


                // since invalid
                return true;
            }
        }

        // clear error states 
        if (!conditionsArray.includes(true)) {

            var cEa = document.querySelector("#" + id).querySelectorAll(".plyr__control");

            Array.from(cEa).forEach(function (item) { item.classList.remove("plyr__controlError") });

            // since valid
            return false;
        }
    }
}

export default Helpers;</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-Chapter%2520Module.html">Chapter Module</a></li><li><a href="module-Helpers%2520Module.html">Helpers Module</a></li><li><a href="module-HostSite%2520Module.html">HostSite Module</a></li><li><a href="module-Loop%2520Module.html">Loop Module</a></li><li><a href="module-PageSupport%2520Module.html">PageSupport Module</a></li><li><a href="module-Player%2520Module.html">Player Module</a></li><li><a href="module-PractiseMaster%2520Module.html">PractiseMaster Module</a></li><li><a href="module-UIprep%2520Module.html">UIprep Module</a></li></ul><h3>Classes</h3><ul><li><a href="module-Chapter%252520Module-Chapter.html">Chapter</a></li><li><a href="module-Helpers%2520Module-Helpers.html">Helpers</a></li><li><a href="module-HostSite%2520Module-HostSite.html">HostSite</a></li><li><a href="module-Loop%252520Module-Loop.html">Loop</a></li><li><a href="module-PageSupport%252520Module-PageSupport.html">PageSupport</a></li><li><a href="module-Player%252520Module-Player.html">Player</a></li><li><a href="module-PractiseMaster%2520Module-PractiseMaster.html">PractiseMaster</a></li><li><a href="module-UIprep%252520Module-UIprep.html">UIprep</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Wed Feb 22 2023 22:49:50 GMT+0000 (Coordinated Universal Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
